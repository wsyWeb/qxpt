<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatib le" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
        <link rel="stylesheet" type="text/css" href="http://10.168.0.218:8086/rsp-group-innovation/static/css/common.css" />
        <link rel="stylesheet" href="http://10.168.0.218:8086/rsp-group-innovation/static/lib/layui/css/layui.css" />
        <link rel="stylesheet" href="css/runnet_common.css" />
        <link rel="stylesheet" href="css/runnet_page.css" />
        <title>专家列表</title>
        <style></style>
    </head>
    <body>
        <div id="headDiv"></div>
        <div id="searchDiv"></div>
        <div class="runnet_main_body">
            <div class="wrap p-t-md">
                <div id="my_space_nav" class="float-left" style="width: 200px"></div>
                <div id="my_space_content" style="width: 1000px" class="float-right">
                    <table class="layui-hide" id="notify_table" lay-filter="notify_table"></table>
                    <script type="text/html" id="header_toolbar_wrap">
                        <div class="layui-btn-container">
                            <button class="layui-btn layui-btn-sm" lay-event="add">新增</button>
                        </div>
                    </script>
                    <script type="text/html" id="operate_wrap">
                        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
                        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="delete">删除</a>
                    </script>
                </div>
            </div>
        </div>
    </body>
</html>
<script type="text/javascript" src="http://10.168.0.218:8086/rsp-group-innovation/static/lib/jquery.js"></script>
<script type="text/javascript" src="http://10.168.0.218:8086/rsp-group-innovation/static/js/common.js"></script>
<script type="text/javascript" src="http://10.168.0.218:8086/rsp-group-innovation/static/lib/layui/layui.all.js"></script>
<script src="js/base.js"></script>
<script>
    $('.headDiv').load('templates/header.html')
    $('.searchDiv').load('templates/search.html')
    $('#my_space_nav').load('templates/my_space_nav.html')
    layui.use(['table', 'element'], function () {
        var table = layui.table

        table.render({
            elem: '#notify_table',
            toolbar: '#header_toolbar_wrap',
            defaultToolbar: [],
            skin: 'line',
            method: 'post',
            url: baseUrl + '/notice/pageList',
            contentType: 'application/json',
            limits: [20, 50, 80, 100],
            response: {
                statusCode: 200, //重新规定成功的状态码为 200，table 组件默认为 0
            },
            parseData: function (res) {
                return {
                    message: res.message,
                    code: res.code,
                    count: res.data.count, //解析数据长度
                    data: res.data.data, //解析数据列表
                }
            },
            cols: [
                [
                    // { type: 'numbers' },
                    // { field: 'map', title: '推荐' },
                    { field: 'top', title: '置顶' },
                    { field: 'title', title: '标题' },
                    { field: 'updateTime', title: '更新时间' },
                    { field: 'label', title: '类别' },
                    { field: 'clickNum', title: '点击数量' },
                    { field: 'commentNum', title: '评论数量' },
                    { field: 'state', title: '状态' },
                    {
                        field: 'sign',
                        title: '操作',
                        width: 120,
                        toolbar: '#operate_wrap',
                    },
                ],
            ],
            page: true,
        })
        table.on('toolbar(notify_table)', function (obj) {
            console.log(obj.event, 'aa')
            if (obj.event === 'add') {
                window.location.href = 'notifyForm.html'
                // layer.open({
                //     type: 2,
                //     title: '新增通知消息',
                //     area: ['1200px', '90%'],
                //     fixed: true, //不固定
                //     btn: ['提交', '关闭'],
                //     // maxmin: true,
                //     content: 'notifyForm.html',
                // })
            }
        })
        table.on('tool(notify_table)', function (obj) {
            var data = obj.data
            console.log(obj)
            if (obj.event === 'edit') {
                layer.open({
                    type: 2,
                    title: '新增通知消息',
                    area: ['1200px', '90%'],
                    fixed: true, //不固定
                    // maxmin: true,
                    content: 'notifyForm.html',
                })
            } else if (obj.event === 'delete') {
            }
        })
    })
</script>
